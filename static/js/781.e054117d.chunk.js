"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[781],{396:(e,s,a)=>{a.d(s,{LP:()=>t,Rf:()=>r,k8:()=>i,l1:()=>n});const n=(e,s)=>fetch("https://frontend-test-assignment-api.abz.agency/api/v1/users",{method:"POST",body:e,headers:{Token:s}}).then((e=>e.json())),t=()=>fetch("https://frontend-test-assignment-api.abz.agency/api/v1/token").then((e=>e.json())),i=()=>fetch("https://frontend-test-assignment-api.abz.agency/api/v1/positions").then((e=>e.json())),r=e=>fetch("https://frontend-test-assignment-api.abz.agency/api/v1/users?page=".concat(e,"&count=6")).then((e=>e.json()))},436:(e,s,a)=>{a.r(s),a.d(s,{default:()=>X});var n=a(791),t=a(705),i=a(694),r=a.n(i),l=a(85),o=(a(462),a(184));const d=e=>{const{name:s,id:a,checked:i,value:l,className:d}=e,[c,m]=(0,n.useState)(l);return(0,o.jsx)(t.gN,{name:s,children:e=>{let{field:n,form:t,meta:h}=e;return(0,o.jsx)(o.Fragment,{children:"position"===s?(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)("label",{htmlFor:a,children:[(0,o.jsx)("input",{...n,type:"radio",id:a,value:l,checked:i}),(0,o.jsx)("span",{}),(0,o.jsx)("p",{children:l}),h.error]})}):(0,o.jsx)(o.Fragment,{children:"file"===s?(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)("div",{className:r()(d[0],{[d[1]]:h.error&&h.touched}),children:[(0,o.jsx)("input",{...n,value:"",type:"file",id:a,onChange:e=>((e,s)=>{const a=e.target.files[0];s.setFieldValue("file",a,!0),s.setTouched({...s.touched,file:!0},!1),a&&m(a.name)})(e,t)}),(0,o.jsx)("label",{htmlFor:a,children:"Upload"}),(0,o.jsx)("label",{htmlFor:a,className:"fileName",children:c||"Upload your file"}),(0,o.jsx)("span",{children:h.error&&h.touched?h.error:null})]})}):(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)("div",{className:r()({[d]:h.error&&h.touched}),children:["phone"===s?(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("input",{type:"text",id:a,required:"required",onChange:e=>{const s=(e=>{const s=e.trim().replace(/[^+0-9]/g,""),a=s.includes("+");return s.length<4?s:s.length<6||s.length<=6&&a?s.replace(/(\+?\d{2})(\d{3})/,"$1 ($2)"):s.length<9||s.length<=9&&a?s.replace(/(\+?\d{2})(\d{3})(\d{1,3})/,"$1 ($2) $3"):s.length<12||s.length<=12&&a?s.replace(/(\+?\d{2})(\d{3})(\d{1,3})(\d{1,2})/,"$1 ($2) $3-$4"):s.replace(/(\+?\d{2})(\d{3})(\d{3})(\d{2})(\d{2})/,"$1 ($2) $3-$4-$5")})(e.target.value);t.handleChange(e),t.setFieldValue("phone",s)},onBlur:t.handleBlur,value:t.values.phone})}):(0,o.jsx)("input",{...n,type:"text",id:a,required:"required"}),(0,o.jsx)("label",{htmlFor:a,children:s}),(0,o.jsx)("span",{children:h.error&&h.touched?h.error:"phone"===s&&"+38 (XXX) XXX - XX - XX"})]})})})})}})},c=e=>{const{classNames:s,positions:a}=e;return(0,o.jsx)(t.gN,{children:e=>{let{field:n,from:t,meta:i}=e;return(0,o.jsxs)("div",{className:s,children:[(0,o.jsx)("p",{children:"Select your position"}),null!==a&&void 0!==a&&a.map((e=>(0,o.jsx)(d,{name:"position",id:e.id,value:e.name,checked:n.value.position===e.name},e.id)))]})}})},m="Form_postReq__pSfjI",h="Form_form__v9fIP",p="Form_error__DIIPw",u="Form_radio__ZxIEn",x="Form_photo__wx4xC",g="Form_disabled__pUd9g";var j=a(7);const f=["image/jpg","image/jpeg"],v=j.Ry().shape({name:j.Z_().min(4,"Name should be at least 4 characters").required("Name required"),email:j.Z_().matches(/^(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])$/,"Invalid email").email("Invalid email").required("Email required"),phone:j.Z_().matches(/^\+?38\s(\(0\d{2}\)[\s-]\d{3}[\s-]\d{2}[\s-]\d{2})$/,"Number must match '+380XXXXXXXXX'").required("Phone number required"),position:j.Z_().matches(/(Lawyer|Content manager|Security|Designer)/).required("Role required"),file:j.nK().required("File is required").test("fileSize","File too large",(e=>e&&e.size<=163840)).test("fileFormat","Unsupported Format",(e=>e&&f.includes(e.type)))});var b=a(396),_=a(88),F=a(420),y=a(708);const N={name:"",email:"",phone:"",position:"Lawyer",file:""},X=()=>{const e=(0,F.I0)(),{currentPage:s,positions:a,token:i}=(0,F.v9)((e=>e.users)),[j,f]=(0,n.useState)(!1);return(0,n.useEffect)((()=>{(0,b.k8)().then((s=>e((0,_.A8)(s)))),(0,b.LP)().then((s=>e((0,_.hP)(s))))}),[e]),(0,o.jsxs)("section",{className:m,id:"registration",children:[(0,o.jsx)(l.Ix,{position:"top-center",autoClose:1e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,role:"error",pauseOnFocusLoss:!1,pauseOnHover:!1,draggable:!0,limit:1,style:{top:"2rem"},progressStyle:{background:"red"}}),(0,o.jsx)("h2",{children:"Working with POST request"}),j?(0,o.jsx)("div",{children:(0,o.jsx)("img",{src:"".concat(y.Z.PUBLIC_URL,"/success-image.svg"),alt:"success"})}):(0,o.jsx)(t.J9,{initialValues:N,onSubmit:(n,t)=>{const r=new FormData,[o]=a.filter((e=>e.name===n.position&&e.id)),d="+"+n.phone.replace(/\D/g,"");r.append("position_id",o.id),r.append("name",n.name),r.append("email",n.email),r.append("phone",d),r.append("photo",n.file),(0,b.l1)(r,i).then((a=>{if(a.success)f(!0),e((0,_.s9)()),(0,b.Rf)(s).then((s=>{e((0,_.Fp)(s))})),t.resetForm();else{(0,l.Am)(a.message);const e=document.getElementById("submit");e.classList.add(g),setTimeout((()=>{e.classList.remove(g)}),2e3)}}))},validationSchema:v,validateOnMount:!0,children:e=>(0,o.jsxs)(t.l0,{className:h,children:[(0,o.jsx)(d,{id:"name",name:"name",className:p}),(0,o.jsx)(d,{id:"email",name:"email",className:p}),(0,o.jsx)(d,{id:"phone",name:"phone",className:p}),(0,o.jsx)(c,{classNames:u,positions:a}),(0,o.jsx)(d,{id:"file",name:"file",className:[x,p]}),(0,o.jsx)("input",{type:"submit",value:"Sign up",id:"submit",className:r()({[g]:!e.isValid})})]})})]})}},708:(e,s,a)=>{a.d(s,{Z:()=>n});const n={PUBLIC_URL:"https://Om-Oleksandr.github.io/test-task-abz-agency/assets/images"}}}]);
//# sourceMappingURL=781.e054117d.chunk.js.map